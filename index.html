<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, maximum-scale=10.0, minimum-scale=0.5, viewport-fit=cover">
    <title>HOSTAL PLAZA LEBU</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #3b82f6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --purple-color: #8b5cf6;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
        }

        [data-theme="dark"] {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #374151;
        }

        body {
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            width: 100%;
        }
        
        .calendar-day {
            min-height: 150px;
            height: 150px;
            border: 3px solid var(--border-color);
            border-radius: 15px;
            padding: 10px 8px;
            background: var(--bg-primary);
            font-size: 18px;
            font-weight: 800;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: visible;
            display: flex;
            flex-direction: column;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .calendar-day:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-color: var(--primary-color);
        }
        
        .calendar-day.today {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }
        
        .reserva-item {
            font-size: 20px;
            font-weight: 900;
            color: white;
            padding: 10px 8px;
            margin: 4px 0;
            border-radius: 10px;
            text-align: center;
            line-height: 1.3;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            border: 3px solid rgba(255,255,255,0.5);
            min-height: 55px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .reserva-item:hover {
            transform: scale(1.1);
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            cursor: pointer;
        }
        
        .hab-1 { 
            background: linear-gradient(135deg, #dc2626, #b91c1c); 
            border: 2px solid #fca5a5;
        }
        .hab-2 { 
            background: linear-gradient(135deg, #2563eb, #1d4ed8); 
            border: 2px solid #93c5fd;
        }
        .hab-3 { 
            background: linear-gradient(135deg, #059669, #047857); 
            border: 2px solid #6ee7b7;
        }
        .hab-4 { 
            background: linear-gradient(135deg, #d97706, #b45309); 
            border: 2px solid #fcd34d;
        }
        .hab-5 { 
            background: linear-gradient(135deg, #7c3aed, #6d28d9); 
            border: 2px solid #c4b5fd;
        }

        .dashboard-card {
            background: var(--bg-primary);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: var(--bg-primary);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            border-radius: 20px;
            padding: 30px;
            margin: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transform: scale(0.9);
            animation: slideIn 0.3s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: scale(0.9) translateY(-20px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
            min-width: 300px;
            padding: 16px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast.success { background: linear-gradient(135deg, #10b981, #059669); }
        .toast.error { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .toast.info { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .toast.warning { background: linear-gradient(135deg, #f59e0b, #d97706); }

        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .theme-toggle:hover {
            transform: scale(1.1) rotate(180deg);
        }

        @media (max-width: 768px) {
            .calendar-day {
                min-height: 120px;
                height: 120px;
                font-size: 16px;
                font-weight: 800;
                padding: 8px 6px;
                border-width: 3px;
            }
            .reserva-item {
                font-size: 18px;
                font-weight: 900;
                padding: 8px 6px;
                margin: 3px 0;
                min-height: 50px;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);
                border-width: 3px;
            }
        }

        @media (max-width: 640px) {
            .calendar-day {
                min-height: 110px;
                height: 110px;
                font-size: 15px;
                font-weight: 800;
                padding: 6px 4px;
                border-width: 2px;
            }
            .reserva-item {
                font-size: 16px;
                font-weight: 900;
                padding: 6px 4px;
                margin: 2px 0;
                min-height: 45px;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);
                border-width: 2px;
            }
        }

        @media (max-width: 480px) {
            .calendar-day {
                min-height: 100px;
                height: 100px;
                font-size: 14px;
                font-weight: 800;
                padding: 5px 3px;
                border-width: 2px;
            }
            .reserva-item {
                font-size: 15px;
                font-weight: 900;
                padding: 5px 3px;
                margin: 2px 0;
                min-height: 40px;
                text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);
                border-width: 2px;
            }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="Cambiar tema">
        <i id="theme-icon" class="fas fa-moon text-lg"></i>
    </button>

    <div id="toast-container"></div>

    <div class="container mx-auto p-4 max-w-7xl">
        <!-- Header -->
        <div class="dashboard-card mb-6 text-center bg-gradient-to-r from-blue-600 to-purple-600 text-white" style="background: linear-gradient(135deg, #3b82f6, #8b5cf6);">
            <div class="flex items-center justify-center">
                <i class="fas fa-hotel text-4xl mr-3"></i>
                <div>
                    <h1 class="text-4xl font-bold mb-1">HOSTAL PLAZA LEBU</h1>
                    <p class="text-xl opacity-90">Sistema de Gesti√≥n de Reservas</p>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="dashboard-card mb-6 p-0 overflow-hidden">
            <div class="flex flex-wrap">
                <button onclick="showPage('calendario', this)" class="nav-tab flex-1 py-4 px-3 text-sm font-semibold bg-blue-500 text-white transition-all duration-300 hover:bg-blue-600">
                    <i class="fas fa-calendar mr-2"></i>Calendario
                </button>
                <button onclick="showPage('dashboard', this)" class="nav-tab flex-1 py-4 px-3 text-sm font-semibold bg-gray-200 text-gray-700 transition-all duration-300 hover:bg-gray-300" style="background: var(--bg-secondary); color: var(--text-secondary);">
                    <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                </button>
                <button onclick="showPage('lista', this)" class="nav-tab flex-1 py-4 px-3 text-sm font-semibold bg-gray-200 text-gray-700 transition-all duration-300 hover:bg-gray-300" style="background: var(--bg-secondary); color: var(--text-secondary);">
                    <i class="fas fa-list mr-2"></i>Lista
                </button>
                <button onclick="showPage('disponibilidad', this)" class="nav-tab flex-1 py-4 px-3 text-sm font-semibold bg-gray-200 text-gray-700 transition-all duration-300 hover:bg-gray-300" style="background: var(--bg-secondary); color: var(--text-secondary);">
                    <i class="fas fa-bed mr-2"></i>Disponibilidad
                </button>
                <button onclick="showPage('estadisticas', this)" class="nav-tab flex-1 py-4 px-3 text-sm font-semibold bg-gray-200 text-gray-700 transition-all duration-300 hover:bg-gray-300" style="background: var(--bg-secondary); color: var(--text-secondary);">
                    <i class="fas fa-chart-line mr-2"></i>Estad√≠sticas
                </button>
            </div>
        </div>

        <!-- P√°gina Calendario -->
        <div id="calendario" class="page active">
            <div class="dashboard-card">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-bold" style="color: var(--text-primary);"><i class="fas fa-calendar-alt mr-2"></i>Calendario de Reservas</h2>
                    <div class="flex space-x-3">
                        <button onclick="verHoy()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold transition-all duration-300">
                            <i class="fas fa-today mr-2"></i>Hoy
                        </button>
                        <button onclick="openModal('nuevaReserva')" class="bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-semibold transition-all duration-300 hover:scale-105">
                            <i class="fas fa-plus mr-2"></i>Nueva Reserva
                        </button>
                    </div>
                </div>
                
                <div class="mb-6 flex justify-between items-center">
                    <button onclick="cambiarMes(-1)" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all duration-300 hover:scale-105">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h3 id="mesActual" class="text-2xl font-bold" style="color: var(--text-primary);"></h3>
                    <button onclick="cambiarMes(1)" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-all duration-300 hover:scale-105">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <div class="calendar-grid mb-4">
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">LUN</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">MAR</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">MI√â</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">JUE</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">VIE</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">S√ÅB</div>
                    <div class="text-center font-bold py-3 rounded-lg" style="background: var(--bg-secondary); color: var(--text-secondary);">DOM</div>
                </div>
                
                <div id="calendarioDias" class="calendar-grid"></div>
            </div>
        </div>

        <!-- Otras p√°ginas (placeholder por ahora) -->
        <div id="dashboard" class="page hidden">
            <div class="dashboard-card">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--text-primary);">Dashboard</h2>
                <p>P√°gina en construcci√≥n...</p>
            </div>
        </div>

        <div id="lista" class="page hidden">
            <div class="dashboard-card">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--text-primary);">Lista de Reservas</h2>
                <p>P√°gina en construcci√≥n...</p>
            </div>
        </div>

        <div id="disponibilidad" class="page hidden">
            <div class="dashboard-card">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--text-primary);">Disponibilidad</h2>
                <p>P√°gina en construcci√≥n...</p>
            </div>
        </div>

        <div id="estadisticas" class="page hidden">
            <div class="dashboard-card">
                <h2 class="text-2xl font-bold mb-4" style="color: var(--text-primary);">Estad√≠sticas</h2>
                <p>P√°gina en construcci√≥n...</p>
            </div>
        </div>
    </div>

    <!-- Modal Nueva Reserva -->
    <div id="nuevaReserva" class="modal">
        <div class="modal-content w-full max-w-lg">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold" style="color: var(--text-primary);"><i class="fas fa-plus-circle mr-2"></i>Nueva Reserva</h2>
                <button onclick="closeModal('nuevaReserva')" class="text-gray-500 hover:text-red-500 text-2xl transition-colors duration-300">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="formReserva" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Nombre del Hu√©sped:</label>
                    <input type="text" id="nombreHuesped" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                           style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Fecha Entrada:</label>
                        <input type="date" id="fechaEntrada" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Fecha Salida:</label>
                        <input type="date" id="fechaSalida" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Habitaci√≥n:</label>
                    <select id="habitacion" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                            style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                        <option value="">Seleccionar habitaci√≥n</option>
                        <option value="1">üî¥ Habitaci√≥n 1 (Roja)</option>
                        <option value="2">üîµ Habitaci√≥n 2 (Azul)</option>
                        <option value="3">üü¢ Habitaci√≥n 3 (Verde)</option>
                        <option value="4">üü† Habitaci√≥n 4 (Naranja)</option>
                        <option value="5">üü£ Habitaci√≥n 5 (Morada)</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Personas:</label>
                        <select id="numPersonas" required 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                                style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                            <option value="1">1 persona</option>
                            <option value="2" selected>2 personas</option>
                            <option value="3">3 personas</option>
                            <option value="4">4 personas</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Precio por Noche:</label>
                        <input type="number" id="precio" placeholder="45000" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Notas:</label>
                    <textarea id="notas" rows="3" placeholder="Comentarios adicionales, solicitudes especiales..."
                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                              style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);"></textarea>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105">
                        <i class="fas fa-save mr-2"></i>Guardar Reserva
                    </button>
                    <button type="button" onclick="closeModal('nuevaReserva')" 
                            class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold transition-all duration-300">
                        <i class="fas fa-times mr-2"></i>Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Editar Reserva -->
    <div id="editarReserva" class="modal">
        <div class="modal-content w-full max-w-lg">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold" style="color: var(--text-primary);"><i class="fas fa-edit mr-2"></i>Editar Reserva</h2>
                <button onclick="closeModal('editarReserva')" class="text-gray-500 hover:text-red-500 text-2xl transition-colors duration-300">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="formEditarReserva" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Nombre del Hu√©sped:</label>
                    <input type="text" id="editNombreHuesped" required 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                           style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Fecha Entrada:</label>
                        <input type="date" id="editFechaEntrada" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Fecha Salida:</label>
                        <input type="date" id="editFechaSalida" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Habitaci√≥n:</label>
                    <select id="editHabitacion" required 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                            style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                        <option value="">Seleccionar habitaci√≥n</option>
                        <option value="1">üî¥ Habitaci√≥n 1 (Roja)</option>
                        <option value="2">üîµ Habitaci√≥n 2 (Azul)</option>
                        <option value="3">üü¢ Habitaci√≥n 3 (Verde)</option>
                        <option value="4">üü† Habitaci√≥n 4 (Naranja)</option>
                        <option value="5">üü£ Habitaci√≥n 5 (Morada)</option>
                    </select>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Personas:</label>
                        <select id="editNumPersonas" required 
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                                style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                            <option value="1">1 persona</option>
                            <option value="2">2 personas</option>
                            <option value="3">3 personas</option>
                            <option value="4">4 personas</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Precio por Noche:</label>
                        <input type="number" id="editPrecio" required 
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                               style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2" style="color: var(--text-primary);">Notas:</label>
                    <textarea id="editNotas" rows="3"
                              class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-300"
                              style="border-color: var(--border-color); background: var(--bg-primary); color: var(--text-primary);"></textarea>
                </div>
                
                <div class="flex space-x-3">
                    <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition-all duration-300 hover:scale-105">
                        <i class="fas fa-save mr-2"></i>Actualizar
                    </button>
                    <button type="button" onclick="eliminarReservaActual()" 
                            class="bg-red-500 hover:bg-red-600 text-white px-4 py-3 rounded-lg font-semibold transition-all duration-300">
                        <i class="fas fa-trash mr-2"></i>Eliminar
                    </button>
                    <button type="button" onclick="closeModal('editarReserva')" 
                            class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-lg font-semibold transition-all duration-300">
                        <i class="fas fa-times mr-2"></i>Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Variables globales
        let reservas = JSON.parse(localStorage.getItem('hostalReservas')) || [];
        let fechaActual = new Date();
        let paginaActiva = 'calendario';
        let tema = localStorage.getItem('tema') || 'light';
        
        const habitacionesConfig = {
            1: { nombre: 'Habitaci√≥n 1', color: '#ef4444', emoji: 'üî¥', clase: 'hab-1', precio: 45000 },
            2: { nombre: 'Habitaci√≥n 2', color: '#3b82f6', emoji: 'üîµ', clase: 'hab-2', precio: 45000 },
            3: { nombre: 'Habitaci√≥n 3', color: '#10b981', emoji: 'üü¢', clase: 'hab-3', precio: 48000 },
            4: { nombre: 'Habitaci√≥n 4', color: '#f59e0b', emoji: 'üü†', clase: 'hab-4', precio: 42000 },
            5: { nombre: 'Habitaci√≥n 5', color: '#8b5cf6', emoji: 'üü£', clase: 'hab-5', precio: 50000 }
        };

        // Funciones de utilidad
        function showToast(message, type = 'success', duration = 3000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <div class="flex items-center justify-between">
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 opacity-70 hover:opacity-100">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 100);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 400);
            }, duration);
        }

        function calcularNoches(entrada, salida) {
            const fechaEntrada = new Date(entrada);
            const fechaSalida = new Date(salida);
            const diferencia = fechaSalida - fechaEntrada;
            return Math.ceil(diferencia / (1000 * 60 * 60 * 24));
        }

        // Gesti√≥n de temas
        function toggleTheme() {
            tema = tema === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', tema);
            localStorage.setItem('tema', tema);
            
            const icon = document.getElementById('theme-icon');
            icon.className = tema === 'light' ? 'fas fa-moon text-lg' : 'fas fa-sun text-lg';
            
            showToast(`Tema ${tema === 'light' ? 'claro' : 'oscuro'} activado`, 'info', 2000);
        }

        // Navegaci√≥n entre p√°ginas
        function showPage(pageId, elemento = null) {
            paginaActiva = pageId;
            
            document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
            
            document.querySelectorAll('.nav-tab').forEach(t => {
                t.classList.remove('bg-blue-500', 'text-white');
                t.style.background = 'var(--bg-secondary)';
                t.style.color = 'var(--text-secondary)';
            });
            
            const pageElement = document.getElementById(pageId);
            if (pageElement) {
                pageElement.classList.remove('hidden');
            }
            
            const activeTab = elemento || document.querySelector(`[onclick*="${pageId}"]`);
            if (activeTab) {
                activeTab.classList.add('bg-blue-500', 'text-white');
                activeTab.style.background = '#3b82f6';
                activeTab.style.color = 'white';
            }
            
            if(pageId === 'calendario') generarCalendario();
        }

        // Funciones del calendario
        function cambiarMes(direccion) {
            fechaActual.setMonth(fechaActual.getMonth() + direccion);
            generarCalendario();
        }

        function verHoy() {
            fechaActual = new Date();
            generarCalendario();
        }

        function generarCalendario() {
            const container = document.getElementById('calendarioDias');
            const mesActualElement = document.getElementById('mesActual');
            
            if (!container) {
                console.error('No se encontr√≥ el contenedor calendarioDias');
                return;
            }
            
            if (!mesActualElement) {
                console.error('No se encontr√≥ el elemento mesActual');
                return;
            }
            
            container.innerHTML = '';
            
            const a√±o = fechaActual.getFullYear();
            const mes = fechaActual.getMonth();
            
            const nombresMeses = [
                'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',
                'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
            ];
            
            mesActualElement.textContent = `${nombresMeses[mes]} ${a√±o}`;
            
            // Primer d√≠a del mes
            const primerDia = new Date(a√±o, mes, 1);
            let diaSemana = primerDia.getDay();
            if (diaSemana === 0) diaSemana = 7;
            diaSemana -= 1;
            
            // D√≠as en blanco al inicio
            for (let i = 0; i < diaSemana; i++) {
                const dia = document.createElement('div');
                dia.className = 'calendar-day';
                container.appendChild(dia);
            }
            
            // D√≠as del mes
            const diasEnMes = new Date(a√±o, mes + 1, 0).getDate();
            const hoy = new Date();
            
            for (let dia = 1; dia <= diasEnMes; dia++) {
                const diaElement = document.createElement('div');
                diaElement.className = 'calendar-day';
                
                const fechaStr = `${a√±o}-${(mes+1).toString().padStart(2,'0')}-${dia.toString().padStart(2,'0')}`;
                
                // Marcar d√≠a actual
                if (dia === hoy.getDate() && mes === hoy.getMonth() && a√±o === hoy.getFullYear()) {
                    diaElement.classList.add('today');
                }
                
                diaElement.innerHTML = `<div class="font-black text-center mb-2 text-xl" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3); color: var(--text-primary);">${dia}</div>`;
                
                // Buscar reservas activas para este d√≠a
                const reservasDelDia = reservas.filter(r => {
                    const entrada = new Date(r.fechaEntrada);
                    const salida = new Date(r.fechaSalida);
                    const fecha = new Date(fechaStr);
                    return fecha >= entrada && fecha < salida;
                });
                
                // Mostrar reservas
                reservasDelDia.forEach((reserva) => {
                    const hab = habitacionesConfig[reserva.habitacion];
                    const reservaDiv = document.createElement('div');
                    
                    reservaDiv.className = `reserva-item ${hab.clase}`;
                    reservaDiv.title = `${reserva.nombreHuesped} - ${hab.nombre}\nEntrada: ${reserva.fechaEntrada}\nSalida: ${reserva.fechaSalida}`;
                    
                    // Hacer clickeable para editar
                    reservaDiv.onclick = (e) => {
                        e.stopPropagation();
                        abrirEditarReserva(reserva);
                    };
                    
                    const nombreCorto = reserva.nombreHuesped.split(' ')[0];
                    const iniciales = reserva.nombreHuesped.split(' ').map(n => n[0]).join('').substring(0, 2);
                    
                    reservaDiv.innerHTML = `
                        <div style="font-size: 18px; font-weight: 900; line-height: 1.2; text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);">${nombreCorto.length > 7 ? iniciales : nombreCorto}</div>
                        <div style="font-size: 16px; font-weight: 900; text-shadow: 3px 3px 6px rgba(0,0,0,0.9), 1px 1px 0px rgba(0,0,0,0.8);">H${reserva.habitacion}</div>
                    `;
                    
                    diaElement.appendChild(reservaDiv);
                });
                
                container.appendChild(diaElement);
            }
        }

        // Manejo de modales
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Formulario de nueva reserva
        document.getElementById('formReserva').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const reserva = {
                id: Date.now().toString(),
                nombreHuesped: document.getElementById('nombreHuesped').value,
                fechaEntrada: document.getElementById('fechaEntrada').value,
                fechaSalida: document.getElementById('fechaSalida').value,
                habitacion: parseInt(document.getElementById('habitacion').value),
                numPersonas: parseInt(document.getElementById('numPersonas').value),
                precio: parseInt(document.getElementById('precio').value),
                notas: document.getElementById('notas').value,
                fechaCreacion: new Date().toISOString()
            };
            
            reservas.push(reserva);
            localStorage.setItem('hostalReservas', JSON.stringify(reservas));
            
            closeModal('nuevaReserva');
            this.reset();
            generarCalendario();
            
            const hab = habitacionesConfig[reserva.habitacion];
            showToast(`‚úÖ Reserva guardada: ${reserva.nombreHuesped} en ${hab.nombre}`, 'success');
        });

        // Formulario de editar reserva
        document.getElementById('formEditarReserva').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!reservaEditando) return;
            
            // Actualizar los datos de la reserva
            reservaEditando.nombreHuesped = document.getElementById('editNombreHuesped').value;
            reservaEditando.fechaEntrada = document.getElementById('editFechaEntrada').value;
            reservaEditando.fechaSalida = document.getElementById('editFechaSalida').value;
            reservaEditando.habitacion = parseInt(document.getElementById('editHabitacion').value);
            reservaEditando.numPersonas = parseInt(document.getElementById('editNumPersonas').value);
            reservaEditando.precio = parseInt(document.getElementById('editPrecio').value);
            reservaEditando.notas = document.getElementById('editNotas').value;
            reservaEditando.fechaModificacion = new Date().toISOString();
            
            // Guardar cambios
            localStorage.setItem('hostalReservas', JSON.stringify(reservas));
            
            closeModal('editarReserva');
            generarCalendario();
            
            const hab = habitacionesConfig[reservaEditando.habitacion];
            showToast(`‚úÖ Reserva actualizada: ${reservaEditando.nombreHuesped} en ${hab.nombre}`, 'success');
            
            reservaEditando = null;
        });

        // Variables para edici√≥n
        let reservaEditando = null;

        // Funciones de edici√≥n de reservas
        function abrirEditarReserva(reserva) {
            reservaEditando = reserva;
            
            // Llenar el formulario con los datos actuales
            document.getElementById('editNombreHuesped').value = reserva.nombreHuesped;
            document.getElementById('editFechaEntrada').value = reserva.fechaEntrada;
            document.getElementById('editFechaSalida').value = reserva.fechaSalida;
            document.getElementById('editHabitacion').value = reserva.habitacion;
            document.getElementById('editNumPersonas').value = reserva.numPersonas;
            document.getElementById('editPrecio').value = reserva.precio;
            document.getElementById('editNotas').value = reserva.notas || '';
            
            openModal('editarReserva');
        }

        function eliminarReservaActual() {
            if (!reservaEditando) return;
            
            const hab = habitacionesConfig[reservaEditando.habitacion];
            if (confirm(`¬øEst√°s seguro de eliminar la reserva de ${reservaEditando.nombreHuesped} en ${hab.nombre}?`)) {
                const index = reservas.findIndex(r => r.id === reservaEditando.id);
                if (index !== -1) {
                    reservas.splice(index, 1);
                    localStorage.setItem('hostalReservas', JSON.stringify(reservas));
                    
                    closeModal('editarReserva');
                    generarCalendario();
                    
                    showToast(`‚úÖ Reserva de ${reservaEditando.nombreHuesped} eliminada`, 'success');
                    reservaEditando = null;
                }
            }
        }

        // Actualizar estad√≠sticas del header
        function actualizarHeaderStats() {
            // Funci√≥n removida - sin resumen en header
        }

        // Cerrar modales al hacer clic fuera
        window.onclick = function(event) {
            const modales = document.querySelectorAll('.modal');
            modales.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('active');
                }
            });
        }

        // Inicializaci√≥n
        function inicializarApp() {
            // Configurar tema inicial
            document.documentElement.setAttribute('data-theme', tema);
            const themeIcon = document.getElementById('theme-icon');
            if (themeIcon) {
                themeIcon.className = tema === 'light' ? 'fas fa-moon text-lg' : 'fas fa-sun text-lg';
            }

            // Configurar fechas m√≠nimas
            const hoy = new Date().toISOString().split('T')[0];
            const ma√±ana = new Date();
            ma√±ana.setDate(ma√±ana.getDate() + 1);
            const ma√±anaStr = ma√±ana.toISOString().split('T')[0];

            const fechaEntrada = document.getElementById('fechaEntrada');
            const fechaSalida = document.getElementById('fechaSalida');
            
            if (fechaEntrada) fechaEntrada.min = hoy;
            if (fechaSalida) fechaSalida.min = ma√±anaStr;

            // Agregar datos de ejemplo si no hay reservas
            if (reservas.length === 0) {
                const ejemploReservas = [
                    {
                        id: 'demo_1',
                        nombreHuesped: 'Juan P√©rez',
                        fechaEntrada: hoy,
                        fechaSalida: ma√±anaStr,
                        habitacion: 1,
                        numPersonas: 2,
                        precio: 45000,
                        notas: 'Cliente frecuente',
                        fechaCreacion: new Date().toISOString()
                    }
                ];
                
                reservas = ejemploReservas;
                localStorage.setItem('hostalReservas', JSON.stringify(reservas));
            }

            // Cargar p√°gina inicial
            setTimeout(() => {
                generarCalendario();
            }, 100);

            // Mostrar mensaje de bienvenida
            setTimeout(() => {
                showToast('üè® Bienvenido al Sistema del Hostal Plaza Lebu', 'info', 4000);
            }, 1000);
        }

        // Inicializar cuando el DOM est√© listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', inicializarApp);
        } else {
            inicializarApp();
        }
    </script>
</body>
</html>